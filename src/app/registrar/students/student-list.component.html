<div class="p-2">
  <h3>Students Management</h3>

  <!-- 🔍 Search Filter -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <button routerLink="add" class="btn btn-sml btn-primary">
      Add Student
    </button>

    <input
      type="text"
      class="form-control w-50"
      placeholder="Search by name, email, section, or strand..."
      [(ngModel)]="searchTerm"
      (input)="applyFilter()"
    />
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center my-4">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading students...</p>
  </div>

  <!-- Table -->
  <table
    *ngIf="!loading && paginatedAccounts.length > 0"
    class="table table-hover table-sm text-center"
  >
    <thead>
      <tr>
        <th style="width: 5%">#</th>
        <th style="width: 20%">Name</th>
        <th style="width: 20%">Email</th>
        <th style="width: 20%">School ID</th>
        <th style="width: 20%">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let acc of paginatedAccounts; let i = index">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ acc.firstName }} {{ acc.lastName }}</td>
        <td>{{ acc.email }}</td>
        <td>{{ acc.school_id }}</td>
        <td>
          <button class="btn btn-sm btn-outline-primary me-1">
            <i class="bi bi-pencil-square"></i> Edit
          </button>
          <button class="btn btn-sm btn-outline-success mx-2">
            <i class="bi bi-eye"></i> View
          </button>
          <button class="btn btn-sm btn-outline-danger">
            <i class="bi bi-trash"></i> Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Empty State -->
  <div *ngIf="!loading && paginatedAccounts.length === 0" class="text-center text-muted">
    No students found.
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center mt-3">
    <button
      class="btn btn-outline-secondary btn-sm me-2"
      [disabled]="currentPage === 1"
      (click)="prevPage()"
    >
      Previous
    </button>
    <span class="align-self-center">
      Page {{ currentPage }} of {{ totalPages }}
    </span>
    <button
      class="btn btn-outline-secondary btn-sm ms-2"
      [disabled]="currentPage === totalPages"
      (click)="nextPage()"
    >
      Next
    </button>
  </div>
</div>
