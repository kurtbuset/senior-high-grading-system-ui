<div class="d-flex justify-content-between m-4">
  <h3>Select Students for this Subject</h3>

  <!-- 🔍 Search Input -->
  <div class="form-group mb-3">
    <input
      type="text"
      class="form-control"
      placeholder="Search by name..."
      [(ngModel)]="searchTerm"
      name="searchTerm"
    />
  </div>
</div>

<form (ngSubmit)="submitEnrollmentDecisions()" class="py-4">
  <table class="table table-hover table-sm">
    <thead>
      <tr>
        <th style="width: 5%">
          <input
            type="checkbox"
            [(ngModel)]="selectAll"
            (change)="toggleSelectAll()"
            name="selectAll"
          />
        </th>
        <th style="width: 20%">Lastname</th>
        <th style="width: 20%">Firstname</th>
        <th style="width: 5%">Sex</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="!isLoading && filteredStudents.length === 0">
        <td colspan="7" class="text-center">
          <h5 class="m-0">No students found.</h5>
        </td>
      </tr>

      <tr *ngFor="let student of filteredStudents; let i = index">
        <td>
          <input
            type="checkbox"
            [(ngModel)]="student.selected"
            name="selected{{ i }}"
          />
        </td>
        <td>{{ student.lastName }}</td>
        <td>{{ student.firstName }}</td>
        <td>{{ student.sex }}</td>
      </tr>
    </tbody>
  </table>

  <div class="d-flex align-items-center">
    <button type="submit" class="mr-3 btn btn-sm btn-primary">
      Submit Selected
    </button>
    <a class="btn btn-success btn-sm" [routerLink]="['/teacher', id]">
      Proceed to Grading
    </a>
  </div>
</form>
